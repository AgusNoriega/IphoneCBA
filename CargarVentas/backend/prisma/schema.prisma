generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model Auditoria {
  IdUsuario  Int
  IpTerminal String   @db.VarChar(500)
  Fecha      DateTime @db.Date
  Usuario    Usuario  @relation(fields: [IdUsuario], references: [IdUsuario], onDelete: NoAction, onUpdate: NoAction, map: "fk_Auditoria_Usuario")

  @@id([IdUsuario, IpTerminal], map: "pk_table_18_id")
}

model Clientes {
  IdCliente          Int                  @id @default(autoincrement())
  Nombre             String               @db.VarChar(500)
  Mail               String               @db.VarChar(500)
  NombredeFantasia   String               @db.VarChar(500)
  Telefono           String               @db.VarChar(500)
  Cuit               String?              @db.VarChar(500)
  Pedidos_Mayoristas Pedidos_Mayoristas[]
}

model Colores {
  IdColor  Int        @id @default(autoincrement())
  Nombre   String     @db.VarChar(500)
  Producto Producto[]
}

model Disponibilidades {
  IdDisponibilidad Int        @id @default(autoincrement())
  Nombre           String     @db.VarChar(500)
  Producto         Producto[]
}

model Equipos {
  IdEquipo          Int                 @id @default(autoincrement())
  Nombre            String              @db.VarChar(500)
  Precios_Mayorista Precios_Mayorista[]
  Producto          Producto[]
}

model Estados {
  IdEstado Int        @id @default(autoincrement())
  Nombre   String     @db.VarChar(500)
  Producto Producto[]
}

model Estados_Pedidos_Mayoristas {
  IdEstadoMayorista  Int                  @id @default(autoincrement())
  Nombre             String?              @db.VarChar(500)
  Pedidos_Mayoristas Pedidos_Mayoristas[]
}

model Formas_de_Pago {
  IdFormasdepago     Int                  @id @default(autoincrement())
  Nombre             String               @db.VarChar(500)
  Pedidos_Mayoristas Pedidos_Mayoristas[]
  Ventas             Ventas[]
}

model Grados {
  IdGrado           Int                 @id @default(autoincrement())
  Nombre            String              @db.Char(1)
  Precios_Mayorista Precios_Mayorista[]
  Producto          Producto[]
}

model Objetivos {
  idObjetivos    Int            @id @default(autoincrement())
  IdTipodeventa  Int
  FechaLimite    DateTime       @db.Date
  Comentario     String?
  Cantidad       Decimal        @db.Decimal
  Tipo_de_Ventas Tipo_de_Ventas @relation(fields: [IdTipodeventa], references: [idIdTipodeventa], onDelete: NoAction, onUpdate: NoAction, map: "fk_Objetivos_TipoVenta")
}

model Pedidos_Mayoristas {
  NdPedido                   Int                          @id @default(autoincrement())
  Fecha                      DateTime                     @db.Date
  IdCliente                  Int
  IdFormadepago              Int
  IdEstadoMayorista          Int
  Total                      Decimal                      @db.Decimal
  Clientes                   Clientes                     @relation(fields: [IdCliente], references: [IdCliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_PedMay_Cliente")
  Estados_Pedidos_Mayoristas Estados_Pedidos_Mayoristas   @relation(fields: [IdEstadoMayorista], references: [IdEstadoMayorista], onDelete: NoAction, onUpdate: NoAction, map: "fk_PedMay_Estado")
  Formas_de_Pago             Formas_de_Pago               @relation(fields: [IdFormadepago], references: [IdFormasdepago], onDelete: NoAction, onUpdate: NoAction, map: "fk_PedMay_FormaPago")
  Pedidos_Mayoristas_Detalle Pedidos_Mayoristas_Detalle[]
}

model Pedidos_Mayoristas_Detalle {
  NdePedido          Int
  IMEI               String             @db.VarChar(500)
  PrecioUnitario     Decimal            @db.Decimal
  Pedidos_Mayoristas Pedidos_Mayoristas @relation(fields: [NdePedido], references: [NdPedido], onDelete: NoAction, onUpdate: NoAction, map: "fk_Detalle_Pedido")
  Producto           Producto           @relation(fields: [IMEI], references: [IMEI], onDelete: NoAction, onUpdate: NoAction, map: "fk_Detalle_Producto")

  @@id([NdePedido, IMEI], map: "pk_table_19_id")
}

model Precios_Mayorista {
  IdEquipo          Int
  IdRango           Int
  IdGrado           Int
  Precio            Decimal           @db.Decimal
  Equipos           Equipos           @relation(fields: [IdEquipo], references: [IdEquipo], onDelete: NoAction, onUpdate: NoAction, map: "fk_Precio_Equipo")
  Grados            Grados            @relation(fields: [IdGrado], references: [IdGrado], onDelete: NoAction, onUpdate: NoAction, map: "fk_Precio_Grado")
  Rangos_de_Bateria Rangos_de_Bateria @relation(fields: [IdRango], references: [IdRango], onDelete: NoAction, onUpdate: NoAction, map: "fk_Precio_Rango")

  @@id([IdEquipo, IdRango, IdGrado], map: "pk_Precios_Mayorista_IdEquipo")
}

model Producto {
  IMEI                       String                       @id @db.VarChar(500)
  IdEquipo                   Int
  Capacidad                  Int
  IdColor                    Int
  Bateria                    Decimal                      @db.Decimal
  IdGrado                    Int
  Detalle                    String?                      @db.VarChar(500)
  IdEstado                   Int
  IdDisponibilidad           Int
  Coste                      Int
  Fecha                      DateTime                     @db.Date
  Pedidos_Mayoristas_Detalle Pedidos_Mayoristas_Detalle[]
  Colores                    Colores                      @relation(fields: [IdColor], references: [IdColor], onDelete: NoAction, onUpdate: NoAction, map: "fk_Producto_Colores")
  Disponibilidades           Disponibilidades             @relation(fields: [IdDisponibilidad], references: [IdDisponibilidad], onDelete: NoAction, onUpdate: NoAction, map: "fk_Producto_Disponibilidades")
  Equipos                    Equipos                      @relation(fields: [IdEquipo], references: [IdEquipo], onDelete: NoAction, onUpdate: NoAction, map: "fk_Producto_Equipos")
  Estados                    Estados                      @relation(fields: [IdEstado], references: [IdEstado], onDelete: NoAction, onUpdate: NoAction, map: "fk_Producto_Estados")
  Grados                     Grados                       @relation(fields: [IdGrado], references: [IdGrado], onDelete: NoAction, onUpdate: NoAction, map: "fk_Producto_Grados")
  Venta_Productos            Venta_Productos[]
}

model Rangos_de_Bateria {
  IdRango           Int                 @id @default(autoincrement())
  Nombre            String              @db.VarChar(500)
  MaximoPorcentaje  Decimal             @db.Decimal
  minimoPorcentaje  Decimal             @db.Decimal
  Precios_Mayorista Precios_Mayorista[]
}

model Roles {
  IdRol   Int       @id @default(autoincrement())
  Nombre  String    @db.VarChar(500)
  Usuario Usuario[]
}

model Tipo_de_Ventas {
  idIdTipodeventa Int         @id @default(autoincrement())
  Nombre          String      @db.VarChar(500)
  Objetivos       Objetivos[]
  Ventas          Ventas[]
}

model Usuario {
  IdUsuario  Int         @id @default(autoincrement())
  Nombre     String      @db.VarChar(500)
  Contrasena String      @db.VarChar(500)
  Mail       String      @db.VarChar(500)
  Dni        Decimal     @db.Decimal
  IdRol      Int
  Auditoria  Auditoria[]
  Roles      Roles       @relation(fields: [IdRol], references: [IdRol], onDelete: NoAction, onUpdate: NoAction, map: "fk_Usuario_Roles")
}

model Venta_Productos {
  IMEI        String   @db.VarChar(500)
  Fecha       DateTime @db.Date
  Precioventa Decimal  @db.Decimal
  IdVentas    Int
  Producto    Producto @relation(fields: [IMEI], references: [IMEI], onDelete: NoAction, onUpdate: NoAction, map: "fk_VentaProd_Producto")
  Ventas      Ventas   @relation(fields: [IdVentas], references: [IdVentas], onDelete: NoAction, onUpdate: NoAction, map: "fk_VentaProd_Ventas")

  @@id([IMEI, IdVentas], map: "pk_Venta_Productos_IMEI")
}

model Ventas {
  IdVentas        Int               @id @default(autoincrement())
  Fecha           DateTime          @db.Date
  IdFormasdepago  Int
  IdTipodeventa   Int
  Notas           String?
  Venta_Productos Venta_Productos[]
  Formas_de_Pago  Formas_de_Pago    @relation(fields: [IdFormasdepago], references: [IdFormasdepago], onDelete: NoAction, onUpdate: NoAction, map: "fk_Ventas_FormaPago")
  Tipo_de_Ventas  Tipo_de_Ventas    @relation(fields: [IdTipodeventa], references: [idIdTipodeventa], onDelete: NoAction, onUpdate: NoAction, map: "fk_Ventas_TipoVenta")
}
